!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="/",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=r(2),o=n(i);console.log("üê≠");var a="\n\tprecision highp float;\n\tattribute vec3 aPosition;\n\tvarying vec2 vTexturePosition;\n\tvarying vec2 vPosition;\n\tvoid main(void) {\n\t\tvPosition = aPosition.xy;\n\t\tvTexturePosition = vec2(aPosition.x + 1.0, -1.0 + aPosition.y) * 0.5;\n\t\tgl_Position = vec4(aPosition, 1.0);\n\t}\n",l="\n\tprecision highp float;\n\tuniform sampler2D uSampler;\n\tvarying vec2 vTexturePosition;\n\tvarying vec2 vPosition;\n\tuniform vec2 uMousePosition;\n\tuniform highp float uWidth;\n\n\tbool isLive(vec2 offset) {\n\t\t\tvec4 lastColor = texture2D(uSampler, vTexturePosition + offset);\n\t\t\tif (lastColor.r == 1.0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t}\n\n\tvoid main(void) {\n\t\tfloat saturation = 1.0 - distance(uMousePosition, vPosition);\n\t\tint liveCount = 0;\n\t\tfloat step = 1.0/uWidth;\n\t\t// step = 0.0;\n\n\t\tif (isLive(vec2(-step, -step))) {liveCount++;}\n\t\tif (isLive(vec2(-step, 0))) {liveCount++;}\n\t\tif (isLive(vec2(-step, step))) {liveCount++;}\n\t\tif (isLive(vec2(0, -step))) {liveCount++;}\n\t\tif (isLive(vec2(0, step))) {liveCount++;}\n\t\tif (isLive(vec2(step, -step))) {liveCount++;}\n\t\tif (isLive(vec2(step, 0))) {liveCount++;}\n\t\tif (isLive(vec2(step, step))) {liveCount++;}\n\n\t\tif (liveCount < 2) {\n\t\t\tgl_FragColor = vec4(1.0, 0, 0, 1.0);\n\t\t} else if (liveCount < 4) {\n\t\t\tgl_FragColor = vec4(0, 1.0, 0, 1.0);\n\t\t} else if (liveCount < 8) {\n\t\t\tgl_FragColor = vec4(0, 0, 1.0, 1.0);\n\t\t} else {\n\t\t\tgl_FragColor = vec4(1.0, 0, 1.0, 1.0);\n\t\t}\n\t\t// gl_FragColor = vec4(0, 0, 0, 1.0);\n\t\tbool selfIsLive = isLive(vec2(0,0));\n\t\tvec4 lastColor = texture2D(uSampler, vTexturePosition);\n\t\tif (selfIsLive && (liveCount == 2 || liveCount == 3)) {\n\t\t\tif (lastColor.g < 1.0) {\n\t\t\t\tgl_FragColor = lastColor + vec4(1.0, 0.01, 0.0, 1.0);\n\t\t\t} else {\n\t\t\t\tgl_FragColor = lastColor + vec4(1.0, 0.0, 0.01, 1.0);\n\t\t\t}\n\t\t} else if (!selfIsLive && (liveCount == 3)) {\n\t\t\tgl_FragColor = vec4(1.0, 0, 0, 1.0);\n\t\t} else {\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.8);\n\t\t}\n\n\t\t// gl_FragColor = texture2D(uSampler, vTexturePosition);\n\t\t// gl_FragColor = vec4(lastColor.r + saturation, lastColor.gba);\n\t\t// gl_FragColor = vec4(saturation, 0, 0, 1.0);\n\t}\n";(0,o.default)(a,l,function(t,e){function r(){t.uniform2f(l,v[0],v[1]),t.bindFramebuffer(t.FRAMEBUFFER,T),0==g?(t.bindTexture(t.TEXTURE_2D,E),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0)):(t.bindTexture(t.TEXTURE_2D,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,E,0)),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3),t.bindFramebuffer(t.FRAMEBUFFER,null),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3),g=(g+1)%2,t.bindTexture(t.TEXTURE_2D,null),requestAnimationFrame(r)}console.log(t.canvas);var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);var i=[1,1,0,-1,1,0,1,-1,0,-1,-1,0];t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var o=t.getAttribLocation(e,"aPosition");t.enableVertexAttribArray(o),t.vertexAttribPointer(o,3,t.FLOAT,!1,0,0);var a=(t.getUniformLocation(e,"uSampler"),t.getUniformLocation(e,"uWidth")),l=t.getUniformLocation(e,"uMousePosition"),E=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,E),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT);var s=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT);var T=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,T),T.width=t.canvas.width,T.height=t.canvas.height,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,T.width,T.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var u=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,u),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,T.width,T.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,u),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null);var v=[];t.canvas.addEventListener("mousemove",function(e){v=[2*(e.clientX/t.canvas.width-.5),2*(1-e.clientY/t.canvas.height-.5)]}),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT);var c=document.createElement("canvas");c.width=t.canvas.width,c.height=t.canvas.height;var R=c.getContext("2d");R.globalAlpha=1;for(var f=0;f<t.canvas.width;f++)for(var d=0;d<t.canvas.width;d++)Math.random()<.35?(R.fillStyle="red",R.fillRect(f,d,1,1)):(R.fillStyle="black",R.fillRect(f,d,1,1));t.bindTexture(t.TEXTURE_2D,E),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,c),t.bindTexture(t.TEXTURE_2D,null),t.uniform1f(a,t.canvas.width);var g=0;requestAnimationFrame(r)})},function(t,e){"use strict";function r(t,e,r){function n(){var t=Math.pow(2,Math.floor(Math.log2(Math.min(window.innerWidth,window.innerHeight))));i.width=t,i.height=t,o.viewport(0,0,i.width,i.height)}var i=(document.body,document.querySelector("canvas")),o=i.getContext("webgl");n(),window.addEventListener("resize",n),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT);var a=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(a,t),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+o.getShaderInfoLog(a));console.log("Vertex shader compiled");var l=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(l,e),o.compileShader(l),!o.getShaderParameter(l,o.COMPILE_STATUS))throw new Error("An error occurred compiling the shader: "+o.getShaderInfoLog(l));console.log("Fragment shader compiled");var E=o.createProgram();if(o.attachShader(E,a),o.attachShader(E,l),o.linkProgram(E),!o.getProgramParameter(E,o.LINK_STATUS))throw new Error("Unable to initialize the shader program.");console.log("Initialized shader program"),o.useProgram(E),r(o,E)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r}]);
//# sourceMappingURL=index.js.map